<?php
namespace Segura\SDK\{{ app_name }}\Abstracts;

use GuzzleHttp\Client as GuzzleClient;
use Psr\Http\Message\ResponseInterface;
use Segura\SDK\{{ app_name }}\Client as SDKClient;

abstract class AbstractAccessLayer
{
    /** @var GuzzleClient */
    protected $guzzleClient;

    /** @var SDKClient **/
    protected $sdkClient;

    private $baseUrl = "http://scampi.segurasystems.dev";

    /**
     * AbstractAccessLayer constructor.
     * @param GuzzleClient $guzzleClient
     * @parma SDKClient $sdkClient
     */
    public function __construct(
        GuzzleClient $guzzleClient,
        SDKClient $sdkClient
    ){
        $this->guzzleClient = $guzzleClient;
        $this->sdkClient = $sdkClient;
    }

    /**
    * @param string $method
    * @param string $endpoint
    * @param array $postData
    *
    * @return mixed|ResponseInterface
    */
    protected function request(
        $method = "GET",
        $endpoint = "/",
        $postData = []
    ) {
        $endpoint = ltrim($endpoint, "/");
        $url = "{$this->baseUrl}/{$endpoint}";
        return $this->guzzleClient->request($method, $url);
    }
}
